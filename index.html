<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Divine Wishes for Nagara Panchami</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&family=Laila:wght@700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        body {
            font-family: 'Segoe UI', serif;
            background: linear-gradient(-45deg, #ffc3a0, #ff7e5f, #feb47b, #ffeda0);
            background-size: 400% 400%;
            animation: gradient-flow 18s ease infinite;
            text-align: center;
            margin: 0;
            /* Added padding-top to make space for the ad banner */
            padding: 80px 20px 20px 20px;
            box-sizing: border-box;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Styles for the Top Ad Container */
        .ad-container-top {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(2px);
            padding: 5px 0;
            z-index: 99;
        }

        @keyframes gradient-flow { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        .container {
            background: linear-gradient(135deg, #fffcf5 0%, #fff5e1 100%);
            max-width: 500px;
            width: 95%;
            margin: auto;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 8px 30px rgba(139, 69, 19, 0.2);
            border: 3px double #d4af37;
            position: relative;
            z-index: 1;
        }
        
        #flower-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 10; }
        /* **FIXED**: Changed flower color to a high-contrast dark brown */
        .flower { position: absolute; top: -10%; font-size: 20px; animation: fall linear infinite; color: #6a3805; }
        @keyframes fall { 100% { transform: translateY(110vh) rotate(360deg); } }
        
        .greeting-heading { font-family: 'Cinzel Decorative', serif; font-size: 2.8em; line-height: 1.2; color: #FFD700; text-shadow: 0px 1px 1px #a28302, 0px 2px 1px #a28302, 0px 3px 1px #a28302, 0px 4px 1px #a28302, 0px 5px 1px #a28302, 0px 6px 1px #a28302, 0px 7px 10px rgba(0, 0, 0, 0.5); animation: royal-pulse 3s ease-in-out infinite alternate; margin-bottom: 15px; }
        @keyframes royal-pulse { from { transform: scale(1); } to { transform: scale(1.05); } }
        .from-name { font-family: 'Laila', serif; display: block; font-size: 0.6em; font-weight: bold; margin-top: 10px; color: #6a3805; text-shadow: 0 0 8px rgba(255, 200, 100, 0.8); text-transform: uppercase; letter-spacing: 1px; }
        .greeting-image { max-width: 100%; height: auto; border-radius: 15px; margin-bottom: 20px; border: 2px solid #e6b800; }
        .input-container p { font-family: 'Laila', serif; font-size: 1.3em; color: #4a2c0f; margin-bottom: 10px; }
        .name-input { width: 90%; padding: 12px; font-size: 1em; font-family: 'Segoe UI', sans-serif; border: 2px solid #ffd700; border-radius: 8px; margin-bottom: 15px; box-sizing: border-box; }
        .generate-button { font-family: 'Laila', serif; background: linear-gradient(45deg, #ff9933, #ff7e5f); color: white; padding: 12px 30px; border: none; border-radius: 8px; font-size: 1.2em; font-weight: bold; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; box-shadow: 0 4px 15px rgba(255, 126, 95, 0.4); }
        .generate-button:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(255, 126, 95, 0.6); }
        #shareContainer { margin-top: 20px; display: none; flex-direction: column; align-items: center; }
        .share-buttons { display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; }
        .social-btn { display: flex; align-items: center; justify-content: center; border: none; padding: 10px; width: 50px; height: 50px; border-radius: 50%; cursor: pointer; transition: transform 0.2s ease, box-shadow 0.2s ease; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .social-btn:hover { transform: scale(1.1); box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        .social-btn svg { width: 28px; height: 28px; fill: white; }
        #whatsapp-btn  { background-color: #25D366; }
        #facebook-btn  { background-color: #1877F2; }
        #copy-btn      { background-color: #6c757d; }

        @media (max-width: 600px) {
            .greeting-heading { font-size: 2.2em; }
            .container { padding: 20px; }
            .input-container p, #shareContainer p { font-size: 1.1em; }
        }
    </style>
</head>
<body>
    <!-- Top Ad Container -->
    <div class="ad-container-top">
        <script type="text/javascript">
            atOptions = {
                'key' : '0702b15141b5735f6c75e7451917237f',
                'format' : 'iframe',
                'height' : 60,
                'width' : 468,
                'params' : {}
            };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/0702b15141b5735f6c75e7451917237f/invoke.js"></script>
    </div>

    <div id="flower-container"></div>
    <div class="container">
        <h1 id="greetingHeading" class="greeting-heading"></h1>
        <img src="images.jpeg" alt="Divine Nagara Panchami" class="greeting-image">
        <div id="inputContainer" class="input-container">
            <p>1. Enter your name to create a wish:</p>
            <input type="text" id="nameInput" class="name-input" placeholder="Your Name...">
            <button id="generateBtn" class="generate-button">✨ Generate My Wish</button>
        </div>
        <div id="shareContainer" class="share-container">
            <p style="font-size: 1.3em; color: #4a2c0f; margin-bottom: 15px;">2. Share your divine wish via:</p>
            <div class="share-buttons">
                 <button id="whatsapp-btn" class="social-btn" aria-label="Share on WhatsApp"><svg viewBox="0 0 24 24"><path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.61 15.35 3.48 16.81L2.1 21.9L7.45 20.58C8.85 21.36 10.42 21.82 12.04 21.82C17.5 21.82 21.95 17.37 21.95 11.91C21.95 9.25 20.92 6.78 19.05 4.91C17.18 3.03 14.71 2 12.04 2M12.04 20.14C10.59 20.14 9.17 19.72 7.96 19L7.54 18.76L4.29 19.57L5.12 16.4L4.86 15.96C4.04 14.65 3.61 13.15 3.61 11.91C3.61 7.33 7.42 3.53 12.04 3.53C14.28 3.53 16.33 4.38 17.89 5.94C19.45 7.5 20.3 9.55 20.3 11.91C20.3 16.5 16.5 20.14 12.04 20.14M17.43 14.86C17.21 14.75 16.06 14.2 15.85 14.12C15.63 14.04 15.47 13.99 15.31 14.21C15.15 14.42 14.68 14.99 14.53 15.15C14.37 15.31 14.22 15.33 14 15.22C13.78 15.12 12.98 14.84 12.03 14C11.23 13.29 10.69 12.43 10.54 12.22C10.38 12 10.25 11.85 10.41 11.69C10.56 11.53 10.72 11.33 10.85 11.17C10.98 11.02 11.03 10.91 11.13 10.74C11.24 10.56 11.18 10.41 11.08 10.31C10.98 10.21 10.47 9.95 10.27 9.85C10.08 9.75 9.92 9.72 9.75 9.72C9.59 9.72 9.42 9.77 9.27 9.92C9.11 10.08 8.65 10.54 8.5 10.69C8.34 10.85 8.19 10.88 7.97 10.88C7.75 10.88 7.55 10.83 7.35 10.73C7.15 10.63 6.34 10.35 5.39 9.47C4.6 8.76 4.05 7.9 3.9 7.68C3.75 7.47 3.88 7.33 4.03 7.19L4.03 7.19C4.16 7.08 4.29 6.94 4.41 6.82C4.54 6.69 4.59 6.58 4.69 6.41C4.79 6.23 4.74 6.08 4.64 5.98C4.54 5.88 4.03 5.63 3.83 5.53C3.64 5.43 3.48 5.4 3.31 5.4C3.15 5.4 2.98 5.45 2.82 5.6C2.67 5.76 2.2 6.23 2.05 6.38C1.9 6.54 17.43 14.86Z"/></svg></button>
                <button id="facebook-btn" class="social-btn" aria-label="Share on Facebook"><svg viewBox="0 0 24 24"><path d="M12 2.04C6.5 2.04 2 6.53 2 12.06C2 17.06 5.66 21.21 10.44 21.96V14.96H7.9V12.06H10.44V9.81C10.44 7.31 11.93 5.96 14.22 5.96C15.31 5.96 16.45 6.15 16.45 6.15V8.62H15.19C13.95 8.62 13.56 9.39 13.56 10.18V12.06H16.34L15.89 14.96H13.56V21.96C18.34 21.21 22 17.06 22 12.06C22 6.53 17.5 2.04 12 2.04Z"/></svg></button>
                <button id="copy-btn" class="social-btn" aria-label="Copy Link"><svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg></button>
            </div>
        </div>
    </div>
    <script>
        let generatedUrl = '';
        const headingElement = document.getElementById('greetingHeading');
        const urlParams = new URLSearchParams(window.location.search);
        const senderName = urlParams.get('name');
        
        function createFlowers(count) {
            const container = document.getElementById('flower-container');
            if (!container) return;
            // **FIXED**: Using universal text symbols that work on all devices
            const flowerTypes = ['✲', '*', '•', '❉'];
            for (let i = 0; i < count; i++) {
                const flower = document.createElement('div');
                flower.classList.add('flower');
                flower.textContent = flowerTypes[Math.floor(Math.random() * flowerTypes.length)];
                flower.style.left = Math.random() * 100 + 'vw';
                flower.style.animationDuration = (Math.random() * 5 + 8) + 's';
                flower.style.animationDelay = Math.random() * 7 + 's';
                flower.style.fontSize = (Math.random() * 10 + 15) + 'px';
                container.appendChild(flower);
            }
        }

        function launchFireworks() {
            var duration = 5 * 1000;
            var animationEnd = Date.now() + duration;
            var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };
            function randomInRange(min, max) { return Math.random() * (max - min) + min; }
            var interval = setInterval(function() {
                var timeLeft = animationEnd - Date.now();
                if (timeLeft <= 0) { return clearInterval(interval); }
                var particleCount = 50 * (timeLeft / duration);
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.9), y: Math.random() - 0.2 }, colors: ['#FFD700', '#FF4500', '#FFFFFF'], drift: randomInRange(-0.5, 0.5) }));
            }, 300);
        }

        window.onload = function() {
            if (senderName) {
                headingElement.innerHTML = `Happy Nagara Panchami<span class="from-name">- from ${decodeURIComponent(senderName)} -</span>`;
                createFlowers(90);
                launchFireworks();
            } else {
                headingElement.innerHTML = 'Happy Nagara Panchami';
            }
        };

        document.getElementById('generateBtn').addEventListener('click', function() {
            const name = document.getElementById('nameInput').value.trim();
            if (name === "") {
                alert("Please enter your name to create your wish!");
                return;
            }
            const baseUrl = window.location.origin + window.location.pathname;
            generatedUrl = `${baseUrl}?name=${encodeURIComponent(name)}`;
            document.getElementById('inputContainer').style.display = 'none';
            document.getElementById('shareContainer').style.display = 'flex';
        });
        
        const shareMessage = "Sending you divine blessings for a very Happy Nagara Panchami! ✨ Check out my wish: ";
        
        document.getElementById('whatsapp-btn').addEventListener('click', function() {
            const whatsappUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent(shareMessage + generatedUrl)}`;
            window.open(whatsappUrl, '_blank');
        });

        document.getElementById('facebook-btn').addEventListener('click', function() {
            const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(generatedUrl)}`;
            window.open(facebookUrl, '_blank');
        });

        document.getElementById('copy-btn').addEventListener('click', function() {
            navigator.clipboard.writeText(generatedUrl).then(function() {
                alert('Link copied to clipboard!');
            }, function() {
                alert('Could not copy link.');
            });
        });
    </script>
</body>
</html>
